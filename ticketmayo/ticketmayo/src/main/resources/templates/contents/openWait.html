<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
	<th:block th:fragment="openWaitFragment">
		<!--begin::Content container-->
		<div id="kt_app_content_container" class="app-container container-fluid">
			
			<!--begin::Navbar-->
			<div class="card mb-6">
				<div class="card-body pt-9 pb-0">
					<!--begin::Details-->
					<div class="d-flex flex-wrap flex-sm-nowrap mb-6">
						<h2>티켓팅 가능한 날짜를 확인하세요 :D</h2>
					</div>
					
					<div class="separator"></div>
				
					<!--begin::Navs-->
					<ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bolder">
						<!--begin::Nav item-->
						<li class="nav-item mt-2">
							<a class="nav-link text-active-primary ms-0 me-10 py-5 active" href="javascript:void(0);">뮤지컬</a>
						</li>
						<!--end::Nav item-->
						<!--begin::Nav item-->
						<li class="nav-item mt-2">
							<a class="nav-link text-active-primary ms-0 me-10 py-5" href="javascript:alert('준비중입니다.');">콘서트</a>
						</li>
						<!--end::Nav item-->
						<!--begin::Nav item-->
						<li class="nav-item mt-2">
							<a class="nav-link text-active-primary ms-0 me-10 py-5" href="javascript:alert('준비중입니다.');">스포츠</a>
						</li>
						<!--end::Nav item-->
						<!--begin::Nav item-->
						<li class="nav-item mt-2">
							<a class="nav-link text-active-primary ms-0 me-10 py-5" href="javascript:alert('준비중입니다.');">기타</a>
						</li>
						<!--end::Nav item-->
					</ul>
					<!--end::Navs-->
					
				</div>
			</div>
			
			<!--begin::Followers toolbar-->
			<div class="d-flex flex-wrap flex-stack mb-6">
				<!--begin::Title-->
				<h3 class="fw-bolder my-2">티켓팅 준비중인 뮤지컬
				<span class="fs-6 text-gray-400 fw-bold ms-1 list-cnt">(0)</span></h3>
				<!--end::Title-->
				<div class="d-flex my-2">
					<!--begin::Select-->
					<select name="status" data-control="select2" data-hide-search="true" class="form-select form-select-sm form-select-solid w-125px">
						<option value="interpark" selected="selected">인터파크</option>
						<option value="yes24">예스24</option>
						
					</select>
					<!--end::Select-->
				</div>
				
			</div>
			<!--end::Followers toolbar-->
			
			<!--begin::Row-->
			<div class="row g-6 mb-6 g-xl-9 mb-xl-9" id="content1">
			</div>
			<!--end::Row-->
			
			
		</div>
		<!--end::Content container-->
		
		<script type="text/javascript">
		$(document).ready(function(){
			ajaxCall4Json('/openWait/api_v1_001', null, 'get' ,function(result){
				console.log(result);
				
				const list = result;
				let html = '';
				
				if (list.length === 0) {
					html += '<div class="d-flex flex-column justify-content-between h-100">';
					html += '<div class="pt-12">';
					html += '<h3 class="text-dark text-center fs-1 fw-bolder line-height-lg">최신정보 수집중</h3>';
					html += '<div class="text-center text-gray-600 fs-5 fw-bold pt-4">공연정보 수집중입니다...<br>곧 업데이트 됩니다.</div>';
					html += '</div>';
					html += '</div>';
				}
				
				if (list[0].errCode === '-1') {
					html += '<div class="d-flex flex-column justify-content-between h-100">';
					html += '<div class="pt-12">';
					html += '<h3 class="text-dark text-center fs-1 fw-bolder line-height-lg">데이터 점검중</h3>';
					html += '<div class="text-center text-gray-600 fs-5 fw-bold pt-4">잠시 점검중입니다...<br>이용에 불편을 드려 죄송합니다.</div>';
					html += '</div>';
					html += '</div>';
					
				} else {
					
					list.forEach(function(el, index){
					
						html += '<div class="col-md-6 col-xxl-4">';
						html += '<div class="card">';
						html += '<div class="card-body d-flex flex-center flex-column py-9 px-5">';
						html += '<div class="bgi-no-repeat bgi-size-cover rounded min-h-100px mb-5">';
						html += '<img src="' + el.image + '" alt="' + el.subject + '" width="150" />';
						html += '</div>';
						html += '<a href="' + el.link + '" target="_blank" class="fs-4 text-gray-800 text-hover-primary fw-bolder mb-0">' + el.subject + '</a>';
						html += '<div class="fw-bold text-gray-400 mb-6"></div>';
						html += '<div class="d-flex flex-center flex-wrap mb-5">';
						html += '<div class="border border-dashed rounded min-w-90px py-3 px-4 mx-2 mb-3">';
						html += '<div class="fs-6 fw-bolder text-gray-700">' + el.date + '</div>';
						html += '<div class="fw-bold text-gray-400">티켓팅 오픈일</div>';
						html += '</div>';
						html += '<div class="border border-dashed rounded min-w-90px py-3 px-4 mx-2 mb-3">';
						html += '<div class="fs-6 fw-bolder text-gray-700">' + el.site + '</div>';
						html += '<div class="fw-bold text-gray-400">구매처</div>';
						html += '</div>';
						html += '<div class="border border-dashed rounded min-w-90px py-3 px-4 mx-2 mb-3">';
						html += '<div class="fs-6 fw-bolder text-gray-700"><a href="javascript:{};" onclick="document.getElementById(\'openWaitBuyMusicalForm_' + index + '\').submit();">티켓팅 신청하기</a></div>';
						html += '<div class="fw-bold text-gray-400">티켓팅 서비스</div>';
						html += '</div>';
						
						html += '<form id="openWaitBuyMusicalForm_' + index + '" method="post" action="/openWaitBuyMusical">';
						html += '<input type="hidden" name="subject" value="' + el.subject + '">';
						html += '<input type="hidden" name="site" value="' + el.site + '">';
						html += '</form>';
						
						html += '</div>';
						
						html += '<div class="symbol-group symbol-hover">';
						el.casting.forEach(function(actor){
							html += '<div class="symbol symbol-35px symbol-circle" data-bs-toggle="tooltip" data-bs-placement="top" title="' + actor.castingName + '">';
							html += '<img alt="' + actor.castingName + '" src="' + actor.castingImage + '">';
							html += '</div>';
						});
						html += '</div>';
						
						html += '</div>';
						html += '</div>';
						html += '</div>';
						
						if (index === 2) {
							html += '<div class="col-md-6 col-xxl-4">';
							html += '<div class="card">';
							html += '<div class="card-body d-flex flex-center flex-column py-9 px-5">';
							html += '<div class="bgi-no-repeat bgi-size-cover rounded min-h-250px mb-5">';
							html += '<img src="https://images.unsplash.com/photo-1604953622228-f705fd2dc641?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=250&q=80" alt="image" width="150" />';
							html += '</div>';
							html += '<a href="#" target="_blank" class="fs-4 text-gray-800 text-hover-primary fw-bolder mb-0">xxx 프로그램</a>';
							html += '<div class="fw-bold text-gray-400 mb-6"></div>';
							html += '<div class="d-flex flex-center flex-wrap mb-5">';
							html += '<div class="border border-dashed rounded min-w-90px py-3 px-4 mx-2 mb-3">';
							html += '<div class="fs-6 fw-bolder text-gray-700">[스폰서 광고] 티켓 구매 보조 프로그램</div>';
							html += '<div class="fw-bold text-gray-400 text-center">누구나 할 수 있는 쉽고 빠른 티켓팅 보조 프로그램</div>';
							html += '</div>';
							html += '</div>';
							html += '</div>';
							html += '</div>';
							html += '</div>';
						}
						
					});
					
				}
				
				$('#content1').append(html);
				$('.list-cnt').text('(' + list.length + ')');
				$('body').tooltip({selector: '[data-bs-toggle="tooltip"]'});
			});
		})
		</script>
		
	</th:block>
</html>